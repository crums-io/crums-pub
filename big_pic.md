# The Big Picture

*Note to self: people don't read. Make a slide show first.*

The world runs on transactions (interactions) between agents. The agents in our world might
fall in 3 categories: 
human, human organizations such as corporations and governments, or machines acting
on behalf of humans and their organizations. The lines are blurring, and increasingly,
every interaction, even those initiated by a human, is mediated thru a machine.
Presently, every interaction that involves an exchange of monies, goods, or services
is "backed" by some form of *receipt* (digital or paper). Lay people call such interactions
simply *transactions*; in the computer world, the word can connote any interaction that
involves a commitment, or the potential to commit (a database transaction, for e.g.).
In the economic sphere, we collect receipts so that parties to a transaction can be held
accountable to their commitments. In other spheres of activity, receipts are often
hard to come by, and when they are, hard to independently verify (e.g. verifying a copy of a
received email). Receipts are hard to prove, particularly to non-expert 3rd parties.
I aim to change that,

* to make proving things *easy*,
* for *everyone*,
* for *everything*,
* at scale.

When we do that, good things will happen. It will oil commerce in good ways, create new
opportunities, etc., etc. To see why and how, let me first paint an unconventional viewpoint.
I will remold a few words here and there, repurposing their meanings.

## Proposition I: The World Runs on Receipts

The world runs on receipts generated by transactions between agents. These receipts, when
the parties must, make their way into various ledgers. For their users, the authenticity of
their receipts is dependent on a *web of trust*. For example, when you google a business's website
address, the search results are largely based on a "measure of trust" called Page Rank:
if you transact (in the most general sense of the word) with the website, the authenticity
of the receipts you receive is still dependent on an original web of trust. (Does your
bank keep good ledgers? You don't care, because your deposits are backed by the U.S.
government, for example. Another web of trust.)

Historically, the earliest form this "web of trust" took was *repute*: if others trust this person to do
"business" with, then perhaps so should I. It survives today and underpins how branding, etc. work.
Soon after, when people started recording their activities in ledgers, our webs of trust began to get
mechanised. Ledgers were powerful instruments not just because they were (designed to be)
tamperproof: they were powerful, because transactions were typically recorded in at least
two ledgers (the parties' ledgers), sometimes more. Once ledgers referenced other ledgers
this way, forging or tampering with records became difficult: the web of trust was expanding.


## Proposition II: Every (Useful) Receipt is From a Ledger

To be sure, the line between ledgers and receipts is historically murky. Is an ancient
Egyptian clay tablet, an example of a receipt, a ledger, or an entry in a ledger? Here's
how I'd classify it: if it's small, small enough to carry, it's a receipt; otherwise, it's
definitely a ledger, or part of a ledger. That it's hard to pin down which it is, I think,
underscores how related these 2 concepts are.

Here's the proposition (a definition, really):
>  Every modern receipt is recorded in *some* ledger. A receipt, then, can be seen as a tearout of one or a few entries from a ledger.

In many cases, when transacting with an outside party, an entry in one ledger references a
receipt (an entry) from another ledger. So *receipts are both inputs to, and outputs from,
ledgers*.


## Digital Receipts

I propose we adopt a *format* for digital receipts. Here are some desirable properties
such a format can provide:

1. **Easy to independently verify.** That is, *anyone* can verify the provenance of a receipt.
2. **Easy to generate.** The existing setup (for generating receipts) works. The only twist is we *annotate*
   the receipt with cryptographic data.
3. **Compact.** The overhead for this annotation is *relatively* small. In its simplest form, it is a few kilobytes.
4. **Minimizes key management.** This "annotation system" uses hash structures. It doesn't involve keys.
5. **Redactable parts.** A recipient can redact (remove) parts from a receipt before sharing it with others.
6. **Recursive.** A receipt can embed other receipts, from the same or other ledgers.
7. **Date-able.** One embedding is a receipt containing a receipt from a timechain, a specialized
   ledger used to establish the *age* of data.
8. **Comparable.** If you know nothing about the goings of the world, are offline, and are handed 2 of these
   receipts, you can establish (sometimes with minor caveats) if they come from the same ledger
   and at what row no. they each occur in that ledger. That is, in their simplest form (without
   embedding another receipt), receipts from the same ledger are evidence of order of operations.
9. **State Declaration.** There's a special receipt a ledger owner can periodically publish, against which all previously
   issued receipts can be verified *offline*. These receipts (a few KBs) act like public declarations of a ledger's latest
   fingerprint. Aside from revealing how many rows are in the ledger (at that snapshot), a state declaration is otherwise completely opaque.
   Because receipts are comparable, each state declaration can establish its lineage to older states.
   
The format has other useful properties (efficient archival of multiple receipts from the same ledger,
for e.g.). But focus on that last item in the list above: it's a *commitment*.

## Commitment Scheme

In crytography, a commitment scheme is a procedure, if you will, with specific properties.

> A commitment scheme is a cryptographic primitive that allows one to commit to a chosen value
> (or chosen statement) while keeping it hidden to others, with the ability to reveal the committed value later.
<p align="right">Oded Goldreich (2001). Foundations of Cryptography: Volume 1, Basic Tools. Cambridge University Press.</p>

Here, by a "commitment scheme", I mean that, and a bit more. A *state declaration* (last item in the section above)
is not just a cryptographic commitment: it's also a *contractual* commitment by the agent issuing it.
That is, if an agent is discovered to be tampering with their ledger (their new state declarations conflict with
previous ones, old receipts conflict with the new state), the ledger *they* keep (!), they may be taken to court
(for misrepresentation, business fraud, etc.).

The *cryptographic* commitment scheme used for this format of receipts, is new. I call it a *skip ledger*.
Its details are not central to my pitch here; its capabilities are. What's important is that there exists
technology that allows receipts to have those properties I enumerated in the previous section.

## Identity: Whose Ledger?
 
A ledger is known by its latest state declaration. (Technically, it's identity is pinned to 
a single 32-byte hash contained in the state structure.) But whose state declaration is it?
The approach taken here is much like git: every ledger (repo) is on an equal footing. Identity
management can be layered in, or on top of, state declarations. For example, state declarations may
be signed (using cryptographic keys issued by a reputable CA). Or a ledger's live state can be made available
thru a REST service over HTTPS, much like timechains do. Another approach is aggregation: a hosted ledger
of ledgers recording the commitment hashes of 3rd party ledgers. The options are many. It would be
unwise to prescribe ahead of time, how identity is established in the "receipt format".

TBC


